<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Sleep Worry-Free: The best tips for Local Secrets Management ðŸ’¤ - </title><meta name="Description" content="Sleep Worry-Free: The best tips for Local Secrets Management"><meta property="og:url" content="https://www.devjev.nl/posts/2023/sleep-worry-free-the-best-tips-for-local-secrets-management/">
  <meta property="og:site_name" content="DevJev.NL">
  <meta property="og:title" content="Sleep Worry-Free: The best tips for Local Secrets Management ðŸ’¤">
  <meta property="og:description" content="Sleep Worry-Free: The best tips for Local Secrets Management">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-06-19T02:00:00+02:00">
    <meta property="article:modified_time" content="2023-06-19T02:00:00+02:00">
    <meta property="article:tag" content="Cloud Security">
    <meta property="article:tag" content="Cloud Automation">
    <meta property="article:tag" content="PowerShell">
    <meta property="article:tag" content="Json">
    <meta property="article:tag" content="Way of Working">
    <meta property="article:tag" content="Local Dev">
    <meta property="og:image" content="https://www.devjev.nl/posts/2023/sleep-worry-free-the-best-tips-for-local-secrets-management/featured-image.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://www.devjev.nl/posts/2023/sleep-worry-free-the-best-tips-for-local-secrets-management/featured-image.png">
  <meta name="twitter:title" content="Sleep Worry-Free: The best tips for Local Secrets Management ðŸ’¤">
  <meta name="twitter:description" content="Sleep Worry-Free: The best tips for Local Secrets Management">
      <meta name="twitter:site" content="@DevJevNL">
<meta name="application-name" content="">
<meta name="apple-mobile-web-app-title" content=""><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://www.devjev.nl/posts/2023/sleep-worry-free-the-best-tips-for-local-secrets-management/" /><link rel="prev" href="https://www.devjev.nl/posts/2023/how-to-use-library-for-azure-pipelines/" /><link rel="next" href="https://www.devjev.nl/posts/2023/dont-spill-the-beans-keep-your-secrets-secure/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Sleep Worry-Free: The best tips for Local Secrets Management ðŸ’¤",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/www.devjev.nl\/posts\/2023\/sleep-worry-free-the-best-tips-for-local-secrets-management\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "https:\/\/www.devjev.nl\/posts\/2023\/sleep-worry-free-the-best-tips-for-local-secrets-management\/featured-image.png",
                            "width":  800 ,
                            "height":  420 
                        }],"genre": "posts","keywords": "Cloud Security, Cloud Automation, PowerShell, Json, Way of Working, Local Dev, Security Hygiene","wordcount":  725 ,
        "url": "https:\/\/www.devjev.nl\/posts\/2023\/sleep-worry-free-the-best-tips-for-local-secrets-management\/","datePublished": "2023-06-19T02:00:00+02:00","dateModified": "2023-06-19T02:00:00+02:00","publisher": {
            "@type": "Organization",
            "name": "Jev"},"author": {
                "@type": "Person",
                "name": "Jev"
            },"description": "Sleep Worry-Free: The best tips for Local Secrets Management"
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="">DevJev.NL</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/" title="Blog posts"> Posts </a><a class="menu-item" href="/categories/" title="Post categories"> Categories </a><a class="menu-item" href="/tags/" title="Tags used in posts"> Tags </a><a class="menu-item" href="/about/" title="About Me"> About </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="">DevJev.NL</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="Blog posts">Posts</a><a class="menu-item" href="/categories/" title="Post categories">Categories</a><a class="menu-item" href="/tags/" title="Tags used in posts">Tags</a><a class="menu-item" href="/about/" title="About Me">About</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content always-active" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Sleep Worry-Free: The best tips for Local Secrets Management ðŸ’¤</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Jev</a>
</span>&nbsp;<span class="post-category">included in <a href="/categories/secure-development/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>Secure Development</a>&nbsp;<a href="/categories/powershell/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>PowerShell</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2023-06-19">2023-06-19</time>&nbsp;&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;725 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;4 minutes&nbsp;</div>
        </div><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/posts/2023/sleep-worry-free-the-best-tips-for-local-secrets-management/featured-image.png"
        data-srcset="/posts/2023/sleep-worry-free-the-best-tips-for-local-secrets-management/featured-image.png, /posts/2023/sleep-worry-free-the-best-tips-for-local-secrets-management/featured-image.png 1.5x, /posts/2023/sleep-worry-free-the-best-tips-for-local-secrets-management/featured-image.png 2x"
        data-sizes="auto"
        alt="/posts/2023/sleep-worry-free-the-best-tips-for-local-secrets-management/featured-image.png"
        title="Sleep Worry-Free: The best tips for Local Secrets Management" /></div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#use-case">Use Case</a></li>
    <li><a href="#how-to-manage-your-secrets---private-config">How to manage your secrets - private config</a>
      <ul>
        <li><a href="#jevsprivateconfigjson">jevs.private.config.json</a></li>
        <li><a href="#jevs-playgroundps1">Jevs-Playground.ps1</a></li>
      </ul>
    </li>
    <li><a href="#wrapping-up">Wrapping up</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>In this post I will share a couple of tips with regards to <code>Secrets Management</code> in your (local) dev environment. Personally I use these to prevent / limit leaking of secrets while developing Azure infrastructure. And I consider them as part of my security hygiene during the development process.</p>
<h2 id="use-case">Use Case</h2>
<p>When you are either building new Azure Infrastructure or debugging an existing configuration you will eventually need to use a secret or a password on you local (dev) environment. The most straightforward approach that is often used is to create a new variable and add the secret as a value to this variable. Effectively (temporarily) hardcoding the secret value into whatever you are working on. The following example sows such an approach, it should be quite familiar to everyone who worked with Azure and PowerShell in the past.</p>
<script src="https://gist.github.com/devjevnl/980670f9d9eea93455d4382fae00fe55.js?file=Example-Snippet"></script>

<p>In this example the secret is part of a temporary or a one time use script created to establish a connection with Azure. Which is needed to for example carry out a deployment. What happens after such a script is used is where the risks lie. More often then not the secrets are left part of the script with the intent to remove them later on, however due to various reasons like time pressure this never happens and in some cases another debug snippet is added to the same or a new file with in some cases new set of secrets.</p>
<p>Secrets used in such way have become un-managed and pose a potential security security risk. Take the following scenario&rsquo;s as examples of how this can cause the secrets to be leaked.</p>
<ol>
<li>The script with the secret can ben accidentally checked in making it available to everyone who has access to the repository in question.</li>
<li>The engineer forgets about the secret leaving it hardcoded in the file which on a much later moment is shared with others as its just a simple draft.</li>
<li>The engineer shares his screen allowing for a screenshot to be taken or the whole thing recorded.</li>
</ol>
<p>Thankfully there are a multiple actions that can be taken to reduce and even prevent this. The next chapter describes my method for <code>Secrets Management</code>.</p>
<h2 id="how-to-manage-your-secrets---private-config">How to manage your secrets - private config</h2>
<p>This method is what I consider a structured approach to organizing a repository. In essence it is <code>an implementation of the separation of credentials from code</code> practice. To achieve this my repositories always have the folder set-up as shown in the next example.</p>
<div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw" aria-hidden="true"></i>Note<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">This example show only a relevant subset of the whole repository folder structure.</div>
        </div>
    </div>
<script src="https://gist.github.com/devjevnl/980670f9d9eea93455d4382fae00fe55.js?file=folder-structure.html"></script>

<p>The <code>tools</code> and <code>references</code> folders contain any tools and any reference material used by the code in the rest of the repo. The <code>personalScripts</code> folder is the folder that is used by the team and me for any temporary and one time use script. Such as snippets to connect to Azure, Azure DevOps or as a simplified controller to call external functions during debugging.<br>
I always start by adding this folder <code>.gitignore</code> to ensure no accidental check-in&rsquo;s which result in secret leaking. The <code>readme.md</code> in this folder is excluded from <code>.gitignore</code> and is part of source controlled files. It contains a description of how to use this set-up.</p>
<p>This is the <code>.gitignore</code> snippet for such a set-up:</p>
<script src="https://gist.github.com/devjevnl/980670f9d9eea93455d4382fae00fe55.js?file=.gitignore"></script>

<h3 id="jevsprivateconfigjson">jevs.private.config.json</h3>
<p>This is the file I use to store all relevant credentials, secrets and other type of GUID and id&rsquo;s which are relevant for the task at hand. I use json as it is really easy to work with when combining it with PowerShell. Putting all the sensitive information which is required for my task in a single file and combining it with <code>.gitignore</code> guardrails allows me have <code>Managed Secrets</code>.</p>
<div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw" aria-hidden="true"></i>Note<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">All files containing <code>.private.config.</code> are omitted from source control explicitly.</div>
        </div>
    </div>
<script src="https://gist.github.com/devjevnl/980670f9d9eea93455d4382fae00fe55.js?file=jevs.private.config.json"></script>

<h3 id="jevs-playgroundps1">Jevs-Playground.ps1</h3>
<p>This is my throw away / one time use PowerShell script which a I modify to fit my task at hand. It contains a header region which is relatively static as this region loads the values from the just mentioned <code>jevs.private.config.json.</code>.  The script can be seen next.</p>
<script src="https://gist.github.com/devjevnl/980670f9d9eea93455d4382fae00fe55.js?file=Jevs-Playground.ps1"></script>

<h2 id="wrapping-up">Wrapping up</h2>
<p>And there you have it, the best tips I can share from my own experience about managing secrets in a local (dev) environment. As always, a big <strong>thanks</strong> for reading this post. If you liked it, don&rsquo;t be shy and have a look at my other <a href="/posts" rel="">posts</a>
.</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2023-06-19</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/cloud-security/">Cloud Security</a>,&nbsp;<a href="/tags/cloud-automation/">Cloud Automation</a>,&nbsp;<a href="/tags/powershell/">PowerShell</a>,&nbsp;<a href="/tags/json/">Json</a>,&nbsp;<a href="/tags/way-of-working/">Way of Working</a>,&nbsp;<a href="/tags/local-dev/">Local Dev</a>,&nbsp;<a href="/tags/security-hygiene/">Security Hygiene</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/2023/how-to-use-library-for-azure-pipelines/" class="prev" rel="prev" title="How to use Library for Azure Pipelines ðŸ“—"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>How to use Library for Azure Pipelines ðŸ“—</a>
            <a href="/posts/2023/dont-spill-the-beans-keep-your-secrets-secure/" class="next" rel="next" title="Don&#39;t spill the beans - keep your secrets secure ðŸ¤«">Don&#39;t spill the beans - keep your secrets secure ðŸ¤«<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Let's automate the boring!</div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Jev Suchoi</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/lightgallery/lightgallery.min.css"><link rel="stylesheet" href="/lib/katex/katex.min.css"><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lightgallery.min.js"></script><script type="text/javascript" src="/lib/lightgallery/plugins/lg-thumbnail.min.js"></script><script type="text/javascript" src="/lib/lightgallery/plugins/lg-zoom.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/auto-render.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":-1},"comment":{},"lightgallery":true,"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30}};</script><script type="text/javascript" src="/js/theme.min.js"></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'G-J3E897NYLC');
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-J3E897NYLC" async></script></body>
</html>
