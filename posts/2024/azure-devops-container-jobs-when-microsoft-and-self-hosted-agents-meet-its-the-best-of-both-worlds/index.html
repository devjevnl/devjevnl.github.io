<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
    <meta name="robots" content="noodp" />
    <title>üöÄ Azure DevOps Container Jobs: When Microsoft and Self-Hosted Agents Meet, It&#39;s the Best of Both Worlds! üåêüõ†Ô∏è - DevJev.nl | Azure, Cloud Security &amp; DevOps Insights for IT Professionals</title><meta name="author" content="Jev">
<meta name="description" content="What are Azure DevOps Container Jobs?"><meta name="keywords" content='Container Jobs, Best of Both Worlds, Microsoft Hosted Agents, Self-Hosted Agents, Azure DevOps'>
  <meta itemprop="name" content="üöÄ Azure DevOps Container Jobs: When Microsoft and Self-Hosted Agents meet, It&#39;s the Best of Both Worlds! üåêüõ†Ô∏è">
  <meta itemprop="description" content="What are Azure DevOps Container Jobs?">
  <meta itemprop="datePublished" content="2024-02-13T02:00:00+02:00">
  <meta itemprop="dateModified" content="2024-02-13T02:00:00+02:00">
  <meta itemprop="wordCount" content="1440">
  <meta itemprop="image" content="https://www.devjev.nl/posts/2024/azure-devops-container-jobs-when-microsoft-and-self-hosted-agents-meet-its-the-best-of-both-worlds/featured-image.png">
  <meta itemprop="keywords" content="Container Jobs,Best of Both Worlds,Microsoft Hosted Agents,Self-Hosted Agents,Azure DevOps"><meta property="og:url" content="https://www.devjev.nl/posts/2024/azure-devops-container-jobs-when-microsoft-and-self-hosted-agents-meet-its-the-best-of-both-worlds/">
  <meta property="og:site_name" content="DevJev.nl | Azure, Cloud Security & DevOps Insights for IT Professionals">
  <meta property="og:title" content="üöÄ Azure DevOps Container Jobs: When Microsoft and Self-Hosted Agents meet, It&#39;s the Best of Both Worlds! üåêüõ†Ô∏è">
  <meta property="og:description" content="What are Azure DevOps Container Jobs?">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-13T02:00:00+02:00">
    <meta property="article:modified_time" content="2024-02-13T02:00:00+02:00">
    <meta property="article:tag" content="Container Jobs">
    <meta property="article:tag" content="Best of Both Worlds">
    <meta property="article:tag" content="Microsoft Hosted Agents">
    <meta property="article:tag" content="Self-Hosted Agents">
    <meta property="article:tag" content="Azure DevOps">
    <meta property="og:image" content="https://www.devjev.nl/posts/2024/azure-devops-container-jobs-when-microsoft-and-self-hosted-agents-meet-its-the-best-of-both-worlds/featured-image.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://www.devjev.nl/posts/2024/azure-devops-container-jobs-when-microsoft-and-self-hosted-agents-meet-its-the-best-of-both-worlds/featured-image.png">
  <meta name="twitter:title" content="üöÄ Azure DevOps Container Jobs: When Microsoft and Self-Hosted Agents meet, It&#39;s the Best of Both Worlds! üåêüõ†Ô∏è">
  <meta name="twitter:description" content="What are Azure DevOps Container Jobs?">
      <meta name="twitter:site" content="@DevJevNL">
<meta name="twitter:creator" content="@DevJevNL" /><meta name="application-name" content="FixIt">
<meta name="apple-mobile-web-app-title" content="FixIt"><meta name="theme-color" data-light="#f8f8f8" data-dark="#252627" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="canonical" type="text/html" href="https://www.devjev.nl/posts/2024/azure-devops-container-jobs-when-microsoft-and-self-hosted-agents-meet-its-the-best-of-both-worlds/" title="üöÄ Azure DevOps Container Jobs: When Microsoft and Self-Hosted Agents meet, It&#39;s the Best of Both Worlds! üåêüõ†Ô∏è - DevJev.nl | Azure, Cloud Security &amp; DevOps Insights for IT Professionals" /><link rel="prev" type="text/html" href="https://www.devjev.nl/posts/2023/powershell-prowess-the-3-commands-you-need-to-know/" title="PowerShell Prowess: The 3 commands you need to know üëà" /><link rel="next" type="text/html" href="https://www.devjev.nl/posts/2024/how-to-build-and-use-your-own-container-with-azure-devops-container-jobs/" title="üõ†Ô∏è How to Build and Use Your Own Container with Azure DevOps Container Jobs üöÄüì¶" /><link rel="stylesheet" href="/css/config.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "üöÄ Azure DevOps Container Jobs: When Microsoft and Self-Hosted Agents meet, It's the Best of Both Worlds! üåêüõ†Ô∏è",
    "inLanguage": "en",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https:\/\/www.devjev.nl\/posts\/2024\/azure-devops-container-jobs-when-microsoft-and-self-hosted-agents-meet-its-the-best-of-both-worlds\/"
    },"image": [{
              "@type": "ImageObject",
              "url": "https:\/\/www.devjev.nl\/posts\/2024\/azure-devops-container-jobs-when-microsoft-and-self-hosted-agents-meet-its-the-best-of-both-worlds\/featured-image.png",
              "width":  1521 ,
              "height":  850 
            }],"genre": "posts","keywords": "Container Jobs, Best of Both Worlds, Microsoft Hosted Agents, Self-Hosted Agents, Azure DevOps","wordcount":  1440 ,
    "url": "https:\/\/www.devjev.nl\/posts\/2024\/azure-devops-container-jobs-when-microsoft-and-self-hosted-agents-meet-its-the-best-of-both-worlds\/","datePublished": "2024-02-13T02:00:00+02:00","dateModified": "2024-02-13T02:00:00+02:00","publisher": {
      "@type": "Organization",
      "name": ""},"author": {
        "@type": "Person",
        "name": "Jev"
      },"description": "What are Azure DevOps Container Jobs?"
  }
  </script><script src="/js/head/color-scheme.min.js"></script></head>
  <body data-header-desktop="fixed" data-header-mobile="auto"><div class="wrapper" data-page-style="custom"><header class="desktop animate__faster" id="header-desktop">
  <div class="header-wrapper">
    <div class="header-title">
      <a href="/" title="DevJev.nl | Azure, Cloud Security &amp; DevOps Insights for IT Professionals"><span class="header-title-text">DevJev.nl</span></a><span class="header-subtitle"></span></div>
    <nav>
      <ul class="menu"><li class="menu-item">
              <a class="menu-link" href="/posts/" title="Blog posts">Posts</a></li><li class="menu-item">
              <a class="menu-link" href="/categories/" title="Post categories">Categories</a></li><li class="menu-item">
              <a class="menu-link" href="/tags/" title="Tags used in posts">Tags</a></li><li class="menu-item">
              <a class="menu-link" href="/about/" title="About Me">About</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id="search-desktop">
            <input type="text" placeholder="Search titles or contents ..." id="search-input-desktop">
            <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
              <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
            </a>
            <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
              <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
            </a>
            <span class="search-button search-loading" id="search-loading-desktop">
              <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
            </span>
          </li><li class="menu-item theme-switch" title="Switch Theme">
          <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
        </li></ul>
    </nav>
  </div>
</header><header class="mobile animate__faster" id="header-mobile">
  <div class="header-container">
    <div class="header-wrapper">
      <div class="header-title">
        <a href="/" title="DevJev.nl | Azure, Cloud Security &amp; DevOps Insights for IT Professionals"><span class="header-title-text">DevJev.nl</span></a><span class="header-subtitle"></span></div>
      <div class="menu-toggle" id="menu-toggle-mobile">
        <span></span><span></span><span></span>
      </div>
    </div>
    <nav>
      <ul class="menu" id="menu-mobile"><li class="search-wrapper">
            <div class="search mobile" id="search-mobile">
              <input type="text" placeholder="Search titles or contents ..." id="search-input-mobile">
              <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
              </a>
              <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
              </a>
              <span class="search-button search-loading" id="search-loading-mobile">
                <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
              </span>
            </div>
            <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
              Cancel
            </a>
          </li><li class="menu-item"><a class="menu-link" href="/posts/" title="Blog posts">Posts</a></li><li class="menu-item"><a class="menu-link" href="/categories/" title="Post categories">Categories</a></li><li class="menu-item"><a class="menu-link" href="/tags/" title="Tags used in posts">Tags</a></li><li class="menu-item"><a class="menu-link" href="/about/" title="About Me">About</a></li><li class="menu-item menu-system">
          <span class="menu-system-item theme-switch" title="Switch Theme"><i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i></span></li>
      </ul>
    </nav>
  </div>
</header><div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
  </div>
  <div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
  </div><main class="fi-container"><aside class="aside-collection animate__animated animate__fadeIn animate__faster" aria-label="Collections"></aside>

  <article class="page single">
    <div class="header"><h1 class="single-title animate__animated animate__flipInX"><span>üöÄ Azure DevOps Container Jobs: When Microsoft and Self-Hosted Agents Meet, It&#39;s the Best of Both Worlds! üåêüõ†Ô∏è</span>
      </h1></div><div class="post-meta">
      <div class="post-meta-line"><span class="post-author"><span class="author"><i class="fa-solid fa-user-circle" aria-hidden="true"></i>
      Jev</span></span><span class="post-included-in">&nbsp;included in <a href="/categories/azure-devops/" class="post-category" title="Category - Azure DevOps"><i class="fa-regular fa-folder fa-fw" aria-hidden="true"></i> Azure DevOps</a>&ensp;<a href="/categories/container-jobs/" class="post-category" title="Category - Container Jobs"><i class="fa-regular fa-folder fa-fw" aria-hidden="true"></i> Container Jobs</a>&ensp;<a href="/categories/containers/" class="post-category" title="Category - Containers"><i class="fa-regular fa-folder fa-fw" aria-hidden="true"></i> Containers</a></span></div><div class="post-meta-line"><span title="published on 2024-02-13 02:00:00"><i class="fa-solid fa-calendar-days fa-fw me-1" aria-hidden="true"></i><time datetime="2024-02-13">2024-02-13</time></span>&nbsp;<span title="1440 words"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden="true"></i>About 1500 words</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden="true"></i>7 minutes</span>&nbsp;</div>
    </div><div class="featured-image"><img src='/posts/2024/azure-devops-container-jobs-when-microsoft-and-self-hosted-agents-meet-its-the-best-of-both-worlds/featured-image.png' alt="/posts/2024/azure-devops-container-jobs-when-microsoft-and-self-hosted-agents-meet-its-the-best-of-both-worlds/featured-image.png"></div><div class="details toc" id="toc-static" data-kept="false">
        <div class="details-summary toc-title">
          <span>Contents</span>
          <span><i class="details-icon fa-solid fa-angle-right" aria-hidden="true"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#what-are-microsoft-hosted-agents">What are Microsoft Hosted Agents</a></li>
    <li><a href="#what-are-self-hosted-agents">What are Self-Hosted Agents</a></li>
    <li><a href="#azure-devops-container-jobs-the-best-of-both-worlds">Azure DevOps Container Jobs: The Best of Both Worlds</a>
      <ul>
        <li><a href="#limitations">Limitations</a></li>
      </ul>
    </li>
    <li><a href="#how-to-use-container-jobs-in-azure-devops">How to Use Container Jobs in Azure DevOps</a>
      <ul>
        <li><a href="#how-to-build-and-use-your-own-container-with-azure-devops-container-jobs">How to build and use your own container with Azure DevOps container jobs</a></li>
      </ul>
    </li>
    <li><a href="#wrapping-up">Wrapping up</a></li>
  </ul>
</nav></div>
      </div><div class="content" id="content"><p>Did you know that you can run your Azure DevOps pipeline jobs in a container? It&rsquo;s a great way to combine the benefits of Microsoft Hosted Agents and Self-Hosted Agents. In this post, I will explain what Azure DevOps Container Jobs are and how you can use them to your advantage. But first, a recap of Microsoft Hosted Agents and Self-Hosted Agents.</p>
<h2 class="heading-element" id="what-are-microsoft-hosted-agents"><span>What are Microsoft Hosted Agents</span>
  <a href="#what-are-microsoft-hosted-agents" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>Microsoft Hosted Agents are a type of agent in Azure DevOps that are hosted and managed by Microsoft. These agents are pre-configured with certain software depending upon the type of agent (Windows, macOS, or Linux) which can run jobs targeting different platforms. With Microsoft Hosted Agents you trade off control for convenience as they are an excellent choice if you need to quickly scale your operations without worrying about the underlying infrastructure management.</p>
<p>Pros:</p>
<ol>
<li><strong>Maintenance-Free</strong>: Microsoft handles all the maintenance, updates, and upgrades, freeing up your time for other tasks.</li>
<li><strong>Scalability</strong>: Microsoft Hosted Agents offer excellent scalability (check <a href="https://azure.microsoft.com/en-us/pricing/details/devops/azure-devops-services/"target="_blank" rel="external nofollow noopener noreferrer">pricing</a> for cost details), agents are immediately available in your Organization. Simply add or remove them to your liking.</li>
<li><strong>Pre-Installed Tools</strong>: These agents come with a large variety of pre-installed tools, saving you from manual installation and configuration.</li>
</ol>
<p>Cons:</p>
<ol>
<li><strong>Limited Customization</strong>: These agents offer limited scope for customization, which might not be ideal for complex, tailored workflows.</li>
<li><strong>Release cadence</strong>: Microsoft decides when and what tools to update on the agents, which might introduce breaking changes.</li>
<li><strong>Usage Limits</strong>: There are usage limitations, which might require you to manage your build and deployment tasks carefully.</li>
<li><strong>Less Control</strong>: Since Microsoft manages everything, you have less control over the environment and its settings.</li>
</ol>
<h2 class="heading-element" id="what-are-self-hosted-agents"><span>What are Self-Hosted Agents</span>
  <a href="#what-are-self-hosted-agents" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>Self-Hosted Agents are agents in Azure DevOps that you manage and maintain on your own infrastructure. These agents can be installed on local machines, on-premises servers, or even on virtual machines in the cloud. With Self-Hosted Agents you trade off convenience for control as they are a great choice if you need more control over the environment and its settings, or if you need to use specific versions of tools and software.</p>
<p>Pros:</p>
<ol>
<li><strong>Greater Control</strong>: With Self-Hosted Agents, you have complete control over the environment, settings, and installed tools, providing flexibility for complex workflows.</li>
<li><strong>No Usage Limits</strong>: There are no strict usage limitations, allowing for more extensive and continuous usage.</li>
<li><strong>Customizable Setup</strong>: You can tailor the setup to match your specific requirements, including installing specific versions of tools and software.</li>
</ol>
<p>Cons:</p>
<ol>
<li><strong>Requires Maintenance</strong>: Unlike Microsoft Hosted Agents, you are responsible for maintaining, upgrading, and updating the Self-Hosted Agents.</li>
<li><strong>Infrastructure Costs</strong>: You&rsquo;ll need to account for the costs of the infrastructure needed to host these agents.</li>
<li><strong>Delayed Access to New Features</strong>: New features and improvements will not be immediately available, as they depend on when you update your agents.</li>
</ol>
<h2 class="heading-element" id="azure-devops-container-jobs-the-best-of-both-worlds"><span>Azure DevOps Container Jobs: The Best of Both Worlds</span>
  <a href="#azure-devops-container-jobs-the-best-of-both-worlds" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>Azure DevOps Container Jobs operate by running each job in an isolated, consistent container which you specify in your pipeline YAML code. You can reference a container from a public or a private repository (just make sure your service connection has sufficient privileges to the repository at hand).
This means you can have the convenience and scalability of Microsoft Hosted Agents, while also having the control and flexibility of Self-Hosted Agents. Let&rsquo;s take a look at the main benefits.</p>
<p><strong>Customization</strong>: Like Self-Hosted Agents, container jobs can be highly customized. You can choose the base images, install specific tools and dependencies, and set environment variables. This makes it ideal for complex workflows that require specific configurations, providing the flexibility similar to Self-Hosted Agents.</p>
<p><strong>Maintenance-free</strong>: Container jobs, like Microsoft Hosted Agents, are maintenance-free. Azure DevOps manages the underlying infrastructure, so you don&rsquo;t have to worry about system updates and upgrades. This frees up time and resources, allowing you to focus on critical development tasks.</p>
<p><strong>Consistent Environment</strong>: With container jobs, each run is executed in a clean, consistent environment. This reduces the chances of errors due to discrepancies in the environment setup, enhancing the reliability of your DevOps pipeline.</p>
<p><strong>Scalability &amp; Efficiency</strong>: Container jobs can be quickly spun up and torn down, offering excellent scalability. They are also efficient as they utilize resources effectively, reducing overheads.</p>
<p><strong>Early detection</strong>: Similar to Self-Hosted Agents, container jobs allow for high level of flexibility by running the same code against multiple versions of tools. For example, you can run your code against different versions of PowerShell to detect early if your code is compatible with the latest version.</p>
<p><strong>Full control</strong>: The creator of the container is in control of what versions of tools and dependencies, and set environment variables are used. This is similar to Self-Hosted Agents, providing the flexibility to tailor the agent specific requirements.</p>
<h3 class="heading-element" id="limitations"><span>Limitations</span>
  <a href="#limitations" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>While container jobs offer the best of both worlds, there are a few limitations to keep in mind:</p>
<ul>
<li>Only windows-2019 and ubuntu-* images support running containers. The macOS image doesn&rsquo;t support running containers.</li>
<li>The Red Hat Enterprise Linux 6 build of the agent won&rsquo;t run container job.</li>
<li>Windows requires that the kernel version of the host and container match.</li>
</ul>
<h2 class="heading-element" id="how-to-use-container-jobs-in-azure-devops"><span>How to Use Container Jobs in Azure DevOps</span>
  <a href="#how-to-use-container-jobs-in-azure-devops" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>For those who are not very familiar with containers, Microsoft hosts a container registry where you can find a variety of container images. It&rsquo;s an amazing source to use as a base image and perfect for this example. The registry is called Microsoft Container Registry (MCR) and you can find it <a href="https://mcr.microsoft.com/"target="_blank" rel="external nofollow noopener noreferrer">here</a>. I suggest using the search in the top right corner as the left hand filters are a bit limited category wise.
Now lets get started on creating a container job using an Azure DevOps pipeline</p>
<div class="details admonition note open">
  <div class="details-summary admonition-title"><i class="icon fa-fw fa-solid fa-pencil-alt" aria-hidden="true"></i>Note<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden="true"></i></div>
  <div class="details-content">
    <div class="admonition-content"><p>The next steps assumes that the following prerequisites are met:</p>
<ul>
<li>Azure DevOps Organization with a Microsoft hosted agent available and accessible</li>
<li>A project in the concerning Azure DevOps organization exists and is accessible</li>
<li>A ready to use Git repo in the concerning project exists and is accessible</li>
</ul></div>
  </div>
</div>
<ol>
<li>
<p>Create a new .yaml file in the concerning repo</p>
</li>
<li>
<p>Add the minimal pipeline scaffolding, by copy pasting the following snippet</p>
<script src="https://gist.github.com/devjevnl/3cc306a392cf6bf8197feec06c49dbaa.js?file=pipeline-scaffolding-base.yml"></script>
</li>
<li>
<p>Now, lets extend the scaffolding pipeline with a PowerShell step that contains a simple inline script to give this pipeline a body. Copy and paste the whole following snippet or extend your existing snippet with the bottom 6 lines.</p>
<script src="https://gist.github.com/devjevnl/3cc306a392cf6bf8197feec06c49dbaa.js?file=pipeline-scaffolding-pws.yml"></script>
</li>
<li>
<p>Now with the required scaffolding in place its time to create a pipeline instance and run it. To do this, navigate to the concerning repo in the Azure DevOps portal and click on the <code>Repos</code> tab. Then click on the <code>Files</code> tab and select the .yml file we created in step 1. Click on the <code>Run</code> button and select <code>Run pipeline</code>. This will create a new pipeline instance and run it. The result should be similar as show in the following image.</p>
<p><figure><a class="lightgallery" href="/posts/2024/azure-devops-container-jobs-when-microsoft-and-self-hosted-agents-meet-its-the-best-of-both-worlds/scaffolding-pipeline-pws-run-result.png" title="/posts/2024/azure-devops-container-jobs-when-microsoft-and-self-hosted-agents-meet-its-the-best-of-both-worlds/scaffolding-pipeline-pws-run-result.png" data-thumbnail="/posts/2024/azure-devops-container-jobs-when-microsoft-and-self-hosted-agents-meet-its-the-best-of-both-worlds/scaffolding-pipeline-pws-run-result.png" data-sub-html="<h2>Run pipeline results</h2>"><img loading="lazy" src='/posts/2024/azure-devops-container-jobs-when-microsoft-and-self-hosted-agents-meet-its-the-best-of-both-worlds/scaffolding-pipeline-pws-run-result.png' alt="/posts/2024/azure-devops-container-jobs-when-microsoft-and-self-hosted-agents-meet-its-the-best-of-both-worlds/scaffolding-pipeline-pws-run-result.png" height="1327" width="1305"></a><figcaption class="image-caption">Run pipeline results</figcaption>
      </figure>
Notice the Linux version and the available PowerShell modules. We are going to need this as a comparison in the later steps.</p>
</li>
<li>
<p>Next lets add a container job to the pipeline. To do this, we need to add a container definition as noted in line 10 of the following snippet. And since we are referencing a public container registry a simple image reference as show in line 11 of the same snippet is sufficient. Make sure to extend your pipeline accordingly.</p>
<script src="https://gist.github.com/devjevnl/3cc306a392cf6bf8197feec06c49dbaa.js?file=pipeline-scaffolding-cjob.yml"></script>
</li>
<li>
<p>Check-in the changes and run the pipeline again. The result should be similar as show in the following image.</p>
<figure><a class="lightgallery" href="/posts/2024/azure-devops-container-jobs-when-microsoft-and-self-hosted-agents-meet-its-the-best-of-both-worlds/scaffolding-pipeline-cjob-run-result.png" title="/posts/2024/azure-devops-container-jobs-when-microsoft-and-self-hosted-agents-meet-its-the-best-of-both-worlds/scaffolding-pipeline-cjob-run-result.png" data-thumbnail="/posts/2024/azure-devops-container-jobs-when-microsoft-and-self-hosted-agents-meet-its-the-best-of-both-worlds/scaffolding-pipeline-cjob-run-result.png" data-sub-html="<h2>Run pipeline results</h2>"><img loading="lazy" src='/posts/2024/azure-devops-container-jobs-when-microsoft-and-self-hosted-agents-meet-its-the-best-of-both-worlds/scaffolding-pipeline-cjob-run-result.png' alt="/posts/2024/azure-devops-container-jobs-when-microsoft-and-self-hosted-agents-meet-its-the-best-of-both-worlds/scaffolding-pipeline-cjob-run-result.png" height="1244" width="1306"></a><figcaption class="image-caption">Run pipeline results</figcaption>
      </figure>
</li>
</ol>
<p>Notice the difference between this run and the first one. First you should see two additional steps <code>Initialize containers</code> and <code>Finalize containers</code>. Second the Linux version and the available PowerShell modules are different. This is because the all the steps part of this job are running inside the specified container, the Azure PowerShell Debian container to be precise.
Congratulations, you have just successfully created and run a container job in Azure DevOps!</p>
<h3 class="heading-element" id="how-to-build-and-use-your-own-container-with-azure-devops-container-jobs"><span>How to build and use your own container with Azure DevOps container jobs</span>
  <a href="#how-to-build-and-use-your-own-container-with-azure-devops-container-jobs" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>Now that you have seen and experienced container jobs in Azure DevOps, you are probable wondering how to build and use your own containers. This is a great question and I will cover this in the next post I plan to release before the end of this month.</p>
<h2 class="heading-element" id="wrapping-up"><span>Wrapping up</span>
  <a href="#wrapping-up" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>And there you have it, <em>Azure DevOps Container Jobs, the best of both Worlds</em>. There are plenty more configuration options available so make sure to check out the reference material used to make this post.</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/devops/pipelines/agents/hosted?view=azure-devops&amp;tabs=yaml&amp;wt.mc_id=DT-MVP-5005327"target="_blank" rel="external nofollow noopener noreferrer">Microsoft-hosted agents</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/devops/pipelines/agents/windows-agent?view=azure-devops&amp;wt.mc_id=DT-MVP-5005327"target="_blank" rel="external nofollow noopener noreferrer">Self-hosted Windows agents</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/devops/pipelines/process/container-phases?view=azure-devops&amp;wt.mc_id=DT-MVP-5005327"target="_blank" rel="external nofollow noopener noreferrer">Define container jobs (YAML)</a></li>
<li><a href="https://mcr.microsoft.com/"target="_blank" rel="external nofollow noopener noreferrer">Microsoft Container Registry</a></li>
</ul>
<p>As always, a big <strong>thanks</strong> for reading this post. If you liked it, don&rsquo;t be shy and have a look at my other <a href="/posts">posts</a>.</p>
</div><div class="post-footer" id="post-footer">
  <div class="post-info">
    <div class="post-info-line">
      <div class="post-info-mod"><span title="Updated on 2024-02-13 02:00:00">Updated on 2024-02-13&nbsp;</span>
      </div></div><div class="post-info-line">
        <div class="post-info-md"></div>
        <div class="post-info-share">
          <span></span>
        </div>
      </div></div>

  <div class="post-info-more">
    <section class="post-tags"><i class="fa-solid fa-tags fa-fw me-1" aria-hidden="true"></i><a href="/tags/container-jobs/" class="post-tag" title="Tags - Container Jobs">Container Jobs</a><a href="/tags/best-of-both-worlds/" class="post-tag" title="Tags - Best of Both Worlds">Best of Both Worlds</a><a href="/tags/microsoft-hosted-agents/" class="post-tag" title="Tags - Microsoft Hosted Agents">Microsoft Hosted Agents</a><a href="/tags/self-hosted-agents/" class="post-tag" title="Tags - Self-Hosted Agents">Self-Hosted Agents</a><a href="/tags/azure-devops/" class="post-tag" title="Tags - Azure DevOps">Azure DevOps</a></section>
    <section><span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
    </section>
  </div><div class="post-nav"><a href="/posts/2023/powershell-prowess-the-3-commands-you-need-to-know/" class="post-nav-item" rel="prev" title="PowerShell Prowess: The 3 Commands You Need to Know üëà"><i class="fa-solid fa-angle-left fa-fw" aria-hidden="true"></i>PowerShell Prowess: The 3 Commands You Need to Know üëà</a><a href="/posts/2024/how-to-build-and-use-your-own-container-with-azure-devops-container-jobs/" class="post-nav-item" rel="next" title="üõ†Ô∏è How to Build and Use Your Own Container With Azure DevOps Container Jobs üöÄüì¶">üõ†Ô∏è How to Build and Use Your Own Container With Azure DevOps Container Jobs üöÄüì¶<i class="fa-solid fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article>

  <aside class="toc" id="toc-auto" aria-label="Contents"><h2 class="toc-title">Contents&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden="true"></i></h2>
      <div class="toc-content always-active" id="toc-content-auto"></div></aside></main><footer class="footer">
    <div class="footer-container"><div class="custom-footer-text">
  <p>¬© 2025 Jev Suchoi - Let's automate the boring! </p>
</div>
<div class="footer-line copyright" itemscope itemtype="http://schema.org/CreativeWork"><i class="fa-regular fa-copyright fa-fw" aria-hidden="true"></i>
            <span itemprop="copyrightYear">2025</span><span class="author" itemprop="copyrightHolder">
              <a href="/"></a></span></div></div>
  </footer></div><div class="widgets"><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role="button" aria-label="Back to Top"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden="true"></i><span class="variant-numeric d-none">0%</span>
        </div></div><div id="mask"></div><noscript>
    <div class="noscript-warning">This website works best with JavaScript enabled.</div>
  </noscript>
</div><link rel="stylesheet" href="/lib/lightgallery/css/lightgallery-bundle.min.css"><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><script src="/lib/autocomplete/autocomplete.min.js" defer></script><script src="/lib/fuse/fuse.min.js" defer></script><script src="/lib/lightgallery/lightgallery.min.js" defer></script><script src="/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js" defer></script><script src="/lib/lightgallery/plugins/zoom/lg-zoom.min.js" defer></script><script src="/lib/cookieconsent/cookieconsent.min.js" defer></script><script src="/posts/2024/azure-devops-container-jobs-when-microsoft-and-self-hosted-agents-meet-its-the-best-of-both-worlds/config.js" defer></script><script src="/js/theme.min.js" defer></script><script>
      window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
      gtag('config', 'G-J3E897NYLC');
    </script><script src="https://www.googletagmanager.com/gtag/js?id=G-J3E897NYLC" async></script></body>
</html>
